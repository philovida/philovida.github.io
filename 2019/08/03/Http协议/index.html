<!DOCTYPE html>
<html lang="zh-Hans">

<!-- Head tag -->
<head><meta name="generator" content="Hexo 3.9.0">
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!--Description-->
    
        <meta name="description" content="The stars are not afraid to appear like fireflies.">
    

    <!--Author-->
    
        <meta name="author" content="é’å´–">
    

    <!-- Title -->
    
    <title>Httpåè®® | è¤ç«</title>

    <!-- Bootstrap Core CSS -->
    <link href="//cdn.bootcss.com/bootstrap/3.3.6/css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/style.css">

    <!-- Custom Fonts -->
    <link href="//cdn.bootcss.com/font-awesome/4.5.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href="//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" rel="stylesheet" type="text/css">
    <link href="//fonts.googleapis.com/css?family=Noto+Serif:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" rel="stylesheet" type="text/css">

    <!-- jQuery -->
    <script src="//cdn.bootcss.com/jquery/2.2.1/jquery.min.js"></script>
    <!-- Bootstrap -->
    <script src="//cdn.bootcss.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
</head>

<body>

    <!-- Content -->
    <section class="article-container">
<!-- Back Home -->
<a class="nav-back" href="/">
    <i class="fa fa-puzzle-piece"></i>
</a>

<!-- Page Header -->
<header class="intro-header">
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <div class="post-heading">
                    <h1>Httpåè®®</h1>
                </div>
            </div>
        </div>
    </div>
</header>

<!-- Post Content -->
<article>
    <div class="container">
        <div class="row">
            <!-- Post Main Content -->
            <div class="post-content col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <h2 id="httpåè®®"><a href="#httpåè®®" class="headerlink" title="httpåè®®"></a>httpåè®®</h2><p>httpåè®®å­¦ä¹ </p>
<a id="more"></a>

<h3 id="httpåè®®é€šä¿—è®²è§£"><a href="#httpåè®®é€šä¿—è®²è§£" class="headerlink" title="httpåè®®é€šä¿—è®²è§£"></a>httpåè®®é€šä¿—è®²è§£</h3><h4 id="é€šè¿‡ç½‘ç»œè°ƒè¯•åŠ©æ‰‹æ¥å—httpè¯·æ±‚"><a href="#é€šè¿‡ç½‘ç»œè°ƒè¯•åŠ©æ‰‹æ¥å—httpè¯·æ±‚" class="headerlink" title="é€šè¿‡ç½‘ç»œè°ƒè¯•åŠ©æ‰‹æ¥å—httpè¯·æ±‚"></a>é€šè¿‡ç½‘ç»œè°ƒè¯•åŠ©æ‰‹æ¥å—httpè¯·æ±‚</h4><p>1) å°†ç½‘ç»œè°ƒè¯•åŠ©æ‰‹è®¾ç½®æˆTCPæœåŠ¡å™¨ï¼Œipä¸º127.0.0.1ï¼Œç«¯å£ä¸º8080<br>2) åœ¨æµè§ˆå™¨ç½‘å€å¤„è¾“å…¥ï¼š127.0.0.1:8080ï¼Œå¯ä»¥çœ‹åˆ°ç½‘ç»œè°ƒè¯•åŠ©æ‰‹ä¸­æ”¶åˆ°äº†è¯·æ±‚ã€‚</p>
<figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"># è¯·æ±‚æ ¼å¼</span><br><span class="line">ã€Receive from 127.0.0.1 : 51437ã€‘ï¼šGET / HTTP/1.1</span><br><span class="line"><span class="attribute">Host</span>: 127.0.0.1:8080</span><br><span class="line"><span class="attribute">Connection</span>: keep-alive</span><br><span class="line"><span class="attribute">Upgrade-Insecure-Requests</span>: 1</span><br><span class="line"><span class="attribute">User-Agent</span>: Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.103 Safari/537.36</span><br><span class="line"><span class="attribute">Accept</span>: text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3</span><br><span class="line"><span class="attribute">Accept-Encoding</span>: gzip, deflate, br</span><br><span class="line"><span class="attribute">Accept-Language</span>: zh-CN,zh;q=0.9</span><br><span class="line"><span class="attribute">Cookie</span>: pageNo=1; pageSize=10</span><br></pre></td></tr></table></figure>

<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"># headerï¼ˆåº”ç­”æ ¼å¼ï¼‰</span><br><span class="line">HTTP/1.1 <span class="number">200</span> OK                   # å¿…é¡»æœ‰</span><br><span class="line"><span class="attribute">Bdpagetype</span>: 1</span><br><span class="line"><span class="attribute">Bdqid</span>: 0xfb356cc60008504e</span><br><span class="line"><span class="attribute">Cache-Control</span>: private</span><br><span class="line"><span class="attribute">Connection</span>: Keep-Alive</span><br><span class="line"><span class="attribute">Content-Encoding</span>: gzip</span><br><span class="line"><span class="attribute">Content-Type</span>: text/html</span><br><span class="line"><span class="attribute">Cxy_all</span>: baidu+aa0567522ab3525001c86f4d0d3cb993</span><br><span class="line"><span class="attribute">Date</span>: Thu, 11 Apr 2019 08:33:38 GMT</span><br><span class="line"><span class="attribute">Expires</span>: Thu, 11 Apr 2019 08:32:59 GMT</span><br><span class="line"><span class="attribute">Server</span>: BWS/1.1</span><br><span class="line"><span class="attribute">Set-Cookie</span>: delPer=0; path=/; domain=.baidu.com  </span><br><span class="line"><span class="attribute">Set-Cookie</span>: BDSVRTM=0; path=/</span><br><span class="line"><span class="attribute">Set-Cookie</span>: BD_HOME=0; path=/</span><br><span class="line"><span class="attribute">Set-Cookie</span>: H_PS_PSSID=1430_28793_21106_28769_28724_28557_28838_28585_28640_26350_28603_28627_28605; path=/; domain=.baidu.com</span><br><span class="line"><span class="attribute">Strict-Transport-Security</span>: max-age=172800</span><br><span class="line"><span class="attribute">Vary</span>: Accept-Encoding</span><br><span class="line"><span class="attribute">X-Ua-Compatible</span>: IE=Edge,chrome=1</span><br><span class="line"><span class="attribute">Transfer-Encoding</span>: chunked</span><br><span class="line"></span><br><span class="line"># bodyï¼ˆåº”ç­”ä½“ï¼‰ ç¬¬ä¸€ä¸ªç©ºè¡Œä¸‹é¢çš„éƒ½æ˜¯body</span><br></pre></td></tr></table></figure>

<blockquote>
<p>Set-Cookie: H_PS_PSSID=1430_28793_21106_28769_28724_28557_28838_28585_28640_26350_28603_28627_28605; path=/; domain=.baidu.com<br>æ„æ€æ˜¯æµè§ˆå™¨åˆ›å»ºä¸€ä¸ªH_PS_PSSIDå˜é‡æ¥å­˜å‚¨åé¢çš„å€¼ï¼Œå¦‚æœè®¿é—®ç™¾åº¦ç½‘ç«™å°±ä¼šæŠŠè¿™ä¸²cookieå‘è¿‡å»ï¼Œç”¨æ¥æ ‡è¯†â€ä½ æ˜¯è°â€ã€‚æœåŠ¡å™¨å¯ä»¥æ ¹æ®ä½ çš„èº«ä»½åŠå†å²è¡Œä¸ºï¼Œé€šè¿‡é˜¿é‡Œå¦ˆå¦ˆå‘é€è¥é”€å¹¿å‘Šã€‚</p>
</blockquote>
<blockquote>
<p>1688.comæ˜¯é˜¿é‡Œæ‰¹å‘çš„ç½‘ç«™ï¼Œæœ‰äº›æ·˜å®åº—æ”¶åˆ°è®¢å•ä¼šè”ç³»1688å‘è´§ï¼Œä»è€Œèµšå–å·®ä»·ã€‚</p>
</blockquote>
<h4 id="pythonç¼–å†™ç®€å•tcpæœåŠ¡å™¨"><a href="#pythonç¼–å†™ç®€å•tcpæœåŠ¡å™¨" class="headerlink" title="pythonç¼–å†™ç®€å•tcpæœåŠ¡å™¨"></a>pythonç¼–å†™ç®€å•tcpæœåŠ¡å™¨</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> socket</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">server_deal</span><span class="params">(client_socket)</span>:</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># æ¥å—å¯¹æ–¹å‘é€çš„è¯·æ±‚</span></span><br><span class="line">    recv_data = client_socket.recv(<span class="number">1024</span>)</span><br><span class="line">    print(<span class="string">'æ¥æ”¶åˆ°çš„æ•°æ®ä¸º:'</span>, recv_data.decode(<span class="string">'utf-8'</span>))</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> recv_data:</span><br><span class="line"></span><br><span class="line">        <span class="comment"># è®¾ç½®è¿”å›å†…å®¹ï¼Œåªè¦æ¥å—åˆ°è¯·æ±‚ï¼Œå°±è¿”å›</span></span><br><span class="line">        send_data = <span class="string">'HTTP/1.1 200 OK\r\n\r\n&lt;h1&gt;hahahaha&lt;/h1&gt;'</span></span><br><span class="line">        client_socket.send(send_data.encode(<span class="string">'utf-8'</span>))</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># å…³é—­socket</span></span><br><span class="line">    client_socket.close()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span><span class="params">()</span>:</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># åˆ›å»ºsocketå¥—æ¥å­—</span></span><br><span class="line">    tcp_socket = socket.socket(socket.AF_INET, socket.SOCK_STREAM)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># è®¾ç½®æœ¬åœ°çš„IPã€ç«¯å£</span></span><br><span class="line">    addr = (<span class="string">''</span>, <span class="number">1207</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># ç»‘å®šç«¯å£</span></span><br><span class="line">    tcp_socket.bind(addr)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># å¼€å¯listenç›‘å¬</span></span><br><span class="line">    tcp_socket.listen(<span class="number">128</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line"></span><br><span class="line">        <span class="comment"># ä¸ºå®¢æˆ·ç«¯æŒç»­æä¾›æœåŠ¡</span></span><br><span class="line">        client_socket, client_addr = tcp_socket.accept()</span><br><span class="line">        <span class="comment"># å¤„ç†è¯·æ±‚</span></span><br><span class="line">        server_deal(client_socket)</span><br><span class="line"></span><br><span class="line">    tcp_socket.close</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:</span><br><span class="line">    main()</span><br></pre></td></tr></table></figure>

<blockquote>
<p>è¯¥ç¨‹åºï¼Œå¦‚æœå¼ºåˆ¶åœæ­¢çš„è¯ï¼Œç«‹å³é‡æ–°å¯åŠ¨ä¼šæŠ¥é”™ï¼šç«¯å£è¢«å ç”¨ã€‚å› ä¸ºå…ˆè°ƒç”¨closeçš„è¦ç­‰å¾…ä¸€æ®µæ—¶é—´æ‰èƒ½å…³é—­ï¼Œè¯¦æƒ…è§tcpå››æ¬¡æŒ¥æ‰‹</p>
</blockquote>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># å¯ä»¥é€šè¿‡è¯¥ä»£ç ä½¿å¾—æœåŠ¡å™¨è°ƒç”¨<span class="selector-tag">close</span>åç«‹å³é‡Šæ”¾èµ„æº</span><br><span class="line"><span class="selector-tag">server_socket</span><span class="selector-class">.setsockopt</span>(<span class="selector-tag">socket</span><span class="selector-class">.SOL_SOCKET</span>, <span class="selector-tag">socket</span><span class="selector-class">.SO_REUSEADDR</span>, 1)</span><br></pre></td></tr></table></figure>

<h4 id="tcpä¸‰æ¬¡æ¡æ‰‹ã€å››æ¬¡æŒ¥æ‰‹"><a href="#tcpä¸‰æ¬¡æ¡æ‰‹ã€å››æ¬¡æŒ¥æ‰‹" class="headerlink" title="tcpä¸‰æ¬¡æ¡æ‰‹ã€å››æ¬¡æŒ¥æ‰‹"></a>tcpä¸‰æ¬¡æ¡æ‰‹ã€å››æ¬¡æŒ¥æ‰‹</h4><h4 id="å•è¿›ç¨‹-å•çº¿ç¨‹-å¤šä»»åŠ¡tcpæœåŠ¡å™¨"><a href="#å•è¿›ç¨‹-å•çº¿ç¨‹-å¤šä»»åŠ¡tcpæœåŠ¡å™¨" class="headerlink" title="å•è¿›ç¨‹-å•çº¿ç¨‹-å¤šä»»åŠ¡tcpæœåŠ¡å™¨"></a>å•è¿›ç¨‹-å•çº¿ç¨‹-å¤šä»»åŠ¡tcpæœåŠ¡å™¨</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> socket <span class="keyword">import</span> *</span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line">HOST = <span class="string">''</span></span><br><span class="line">PORT = <span class="number">7890</span></span><br><span class="line">ADDR = (HOST, PORT)</span><br><span class="line">BUFSIZ = <span class="number">1024</span></span><br><span class="line">SOCK_LIST = list() <span class="comment"># ç”¨æ¥å­˜å‚¨è¯·æ±‚çš„å®¢æˆ·ç«¯socket</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">server_socket</span><span class="params">(tcpCliSock, recv_data)</span>:</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># æ¥å—å®¢æˆ·ç«¯è¯·æ±‚</span></span><br><span class="line">    <span class="comment"># recv_data = tcpCliSock.recv(BUFSIZ)</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># åˆ¤æ–­å®¢æˆ·ç«¯è¯·æ±‚çš„èµ„æº,å°†æ–‡ä»¶åæ‰¾å‡ºæ¥</span></span><br><span class="line">    req_dgram = recv_data.decode(<span class="string">'utf-8'</span>).splitlines()</span><br><span class="line">    ret = re.match(<span class="string">'[^/]*(/[^ ]*)'</span>, req_dgram[<span class="number">0</span>])</span><br><span class="line">    <span class="keyword">if</span> ret:</span><br><span class="line">        file_name = ret.group(<span class="number">1</span>)</span><br><span class="line">        <span class="keyword">if</span> file_name == <span class="string">'/'</span>:</span><br><span class="line">            file_name = <span class="string">'/index.html'</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># æ ¹æ®è¯·æ±‚èµ„æºï¼Œæ‰“å¼€å¯¹åº”æ–‡ä»¶å¹¶è¯»å–å†…å®¹</span></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        f = open(<span class="string">'tcp_server/html'</span>+ file_name, <span class="string">'rb'</span>)</span><br><span class="line">    <span class="keyword">except</span> Exception <span class="keyword">as</span> ret:</span><br><span class="line">        response_body = <span class="string">'æ–‡ä»¶æ²¡æœ‰æ‰¾åˆ°'</span></span><br><span class="line">        response_header = <span class="string">'HTTP/1.1 404 NOT FOUND\r\n'</span></span><br><span class="line">        response_header += <span class="string">'Content-Type:text/html; charset=UTF-8\r\n'</span></span><br><span class="line">        response_header += <span class="string">'\r\n'</span></span><br><span class="line">        response = response_header.encode(<span class="string">'utf-8'</span>) + response_body.encode(<span class="string">'utf-8'</span>)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        html_content = f.read()</span><br><span class="line">        f.close()</span><br><span class="line"></span><br><span class="line">        <span class="comment"># ç»„è£…åº”ç­”æŠ¥æ–‡</span></span><br><span class="line">        response_body = html_content</span><br><span class="line">        response_header = <span class="string">'HTTP/1.1 200 OK\r\n'</span></span><br><span class="line">        response_header += <span class="string">'Content-Length:%d\r\n'</span>% len(response_body)</span><br><span class="line">        response_header += <span class="string">'\r\n'</span></span><br><span class="line">        response = response_header.encode(<span class="string">'utf-8'</span>) + response_body</span><br><span class="line"></span><br><span class="line">    <span class="comment"># å‘é€æ•°æ®</span></span><br><span class="line">    tcpCliSock.send(response)</span><br><span class="line">        </span><br><span class="line"></span><br><span class="line">    <span class="comment"># å…³é—­å¥—æ¥å­—</span></span><br><span class="line">    <span class="comment"># tcpCliSock.close()</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span><span class="params">()</span>:</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># åˆ›å»ºå¥—æ¥å­—</span></span><br><span class="line">    tcpSock = socket(AF_INET, SOCK_STREAM)</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># ç»‘å®šç«¯å£</span></span><br><span class="line">    tcpSock.bind(ADDR)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># å¯ç”¨ç›‘å¬</span></span><br><span class="line">    tcpSock.listen(<span class="number">128</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># å°†æœåŠ¡å™¨å¥—æ¥å­—è®¾ç½®æˆéå µå¡</span></span><br><span class="line">    tcpSock.setblocking(<span class="literal">False</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line"></span><br><span class="line">        time.sleep(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># è®¾ç½®è¢«åŠ¨å¥—æ¥å­—ï¼Œä¸ºå®¢æˆ·ç«¯æä¾›æœåŠ¡.</span></span><br><span class="line">        <span class="comment"># éå µå¡acceptå¦‚æœæ²¡æœ‰å®¢æˆ·ç«¯è¯·æ±‚ï¼Œåˆ™ä¼šæŠ¥å¼‚å¸¸ï¼Œå› æ­¤ç”¨tryæ¥å¤„ç†å¼‚å¸¸æƒ…å†µã€‚</span></span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            tcpCliSock, addr = tcpSock.accept()</span><br><span class="line">        <span class="keyword">except</span> Exception <span class="keyword">as</span> ret:</span><br><span class="line">            print(<span class="string">'è¿˜æ²¡æœ‰å®¢æˆ·ç«¯æ¥è¿æ¥'</span>)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            tcpCliSock.setblocking(<span class="literal">False</span>)</span><br><span class="line">            print(<span class="string">'&gt;&gt;&gt;&gt;&gt;æ¥äº†ä¸€ä¸ªå®¢æˆ·ç«¯&gt;&gt;&gt;&gt;&gt;'</span>)</span><br><span class="line">            SOCK_LIST.append(tcpCliSock)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># recvéå µå¡æ—¶ï¼Œå¦‚æœæ²¡æœ‰æ”¶åˆ°æ•°æ®ä¼šæŠ¥å¼‚å¸¸ã€‚åŒæ ·ä½¿ç”¨tryæ¥å¤„ç†å¼‚å¸¸æƒ…å†µ</span></span><br><span class="line">        <span class="keyword">for</span> client <span class="keyword">in</span> SOCK_LIST: </span><br><span class="line">            <span class="keyword">try</span>:</span><br><span class="line">                recv_data = client.recv(BUFSIZ)</span><br><span class="line">            <span class="keyword">except</span> Exception <span class="keyword">as</span> ret:</span><br><span class="line">                print(<span class="string">'*****å®¢æˆ·ç«¯æ€ä¹ˆè¿˜ä¸å‘é€æ•°æ®å‘¢*******'</span>)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                <span class="keyword">if</span> recv_data:</span><br><span class="line">                    server_socket(tcpCliSock, recv_data)</span><br><span class="line">                <span class="comment"># å¦‚æœå®¢æˆ·ç«¯å‘é€çš„æ•°æ®ä¸ºç©ºï¼Œæ„å‘³ç€å®¢æˆ·ç«¯æ–­å¼€è¿æ¥</span></span><br><span class="line">                <span class="comment"># å…ˆå°†å®¢æˆ·ç«¯socketå…³é—­</span></span><br><span class="line">                <span class="comment"># å†å°†listä¸­çš„å®¢æˆ·ç«¯socketåˆ é™¤</span></span><br><span class="line">                <span class="keyword">else</span>:</span><br><span class="line">                    client.close()</span><br><span class="line">                    SOCK_LIST.remove(client)</span><br><span class="line">    </span><br><span class="line">    tcpSock.close()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:</span><br><span class="line">    main()</span><br></pre></td></tr></table></figure>

<blockquote>
<p>é—®é¢˜1ï¼šåœ¨æ‰“å¼€htmlæ–‡ä»¶çš„æ—¶å€™ï¼Œä¸€ç›´æç¤ºNo such file or directoryã€‚æ£€æŸ¥å‘ç°htmlæ–‡ä»¶ç›¸å¯¹è·¯å¾„ä¸ä»£ç ç›¸æ¯”æ²¡æœ‰é—®é¢˜ï¼Œä½†æ˜¯ç”±äºæ˜¯åœ¨vscodeç»ˆç«¯è¿è¡Œï¼Œç»ˆç«¯æç¤ºç¬¦çš„ä½ç½®æ˜¯åœ¨ä»£ç çš„ä¸Šå±‚ç›®å½•ï¼Œæ‰€ä»¥ç›¸å¯¹è·¯å¾„å°±ä¸èƒ½ä»¥ä»£ç ä¸ºå‡†ï¼Œè€Œè¦ä»¥ç»ˆç«¯è¿è¡Œçš„ä½ç½®ä¸ºå‡†ã€‚</p>
</blockquote>

 
                <!-- Meta -->
                <div class="post-meta">
                    <hr>
                    <br>
                    <div class="post-tags">
                        
                            

<a href="/tags/front-end/">#front-end</a>


                        
                    </div>
                    <div class="post-date">
                        2019 å¹´ 08 æœˆ 03 æ—¥
                    </div>
                </div>
            </div>

            <!-- Comments -->
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <!-- Disqus Comments -->


            </div>
        </div>
    </div>
</article>
</section>

<!-- Image viewer-->

    <!-- Custom picture view-->
    <link href="/css/viewer.min.css" rel="stylesheet" />
    <script
      src="/js/viewer.min.js"
      type="text/javascript"
      charset="utf-8"
    ></script>
    
    <script type="text/javascript">
      // set image viewer
      Viewer.setDefaults({
        zoomRatio: [0.5],
        navbar: false,
        toolbar: false,
        button: false,
        title: [2, (image, imageData) => `${image.alt}`],
        show: function() {
          this.viewer.zoomTo(0.5);
        }
      });
      var imageList = document.getElementsByTagName("img");
      Array.prototype.forEach.call(imageList, element => {
        var viewer = new Viewer(element);
      });
    </script>

    
    <!-- Scripts -->
    <script type="text/javascript">
    console.log("Â© zchen9 ğŸ™‹ 2015-" + new Date().getFullYear());
</script>
  
    <!-- Google Analytics -->
    

    <!-- Service Worker -->
    <!-- if using service worker -->

    <script text="module">
      if ("serviceWorker" in navigator) {
        navigator.serviceWorker
          .register("/sw.js")
          .then(function() {
            console.log("A new service worker is being installed.");
          })
          .catch(function(error) {
            console.log("Service worker registration failed:", error);
          });
      } else {
        console.log("Service workers are not supported.");
      }
    </script>

    
</body>

</html>